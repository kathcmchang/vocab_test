<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>HKEB Vocabulary Test: Level 4</title>
<style>
	body {
		background-color: #FDFCE5;
		text-align: center;
	}
	h1, h2, p {
		color: #4A403A;
		font-family: 'Open Sans', sans-serif;
	}
	button {
		background-color: #BFD8B8;
		border-radius: 20px;
		color: #4A403A;
		font-family: 'Open Sans', sans-serif;
		text-align: center;
		width: auto;
		margin: auto;
	}
	#menu {
		width: 100px;
	}
	h1 {
		border-radius: 20px;
		background-color: #BFD8B8;
		width: 50%;
		margin: auto;
		text-align: center;
	}
	
	div {
		border-radius: 20px;
		float: right;
		margin-right: 30px;
		border: 1px dotted #4A403A;
		background-color: #BFD8B8;
		width: auto;
	}

</style>

<script src="chinese_level4.js"></script>
<script src="english_level4.js"></script>
<script>


var countdownTimer;
var score = 0;
var timeLeft = 900;
var buttonCount = 0;
var answerCount = 0;


function countdown()
{
	document.getElementById("timer").innerHTML = timeLeft;
	if (timeLeft == 0)
	{
		clearInterval(countdownTimer);
		document.getElementById("btn_next").disabled = true;
		alert("Time's up!");
	}

	timeLeft--;
}
function getRandomWord(){
	var random_number = Math.random() * english4.length;
	var random_int = Math.floor(random_number);
	return random_int;
}
function start()
{
	wordIndex = getRandomWord();
	document.getElementById("display").innerHTML = chinese4[wordIndex];
	countdownTimer = setInterval("countdown()", 900);
}



var wordIndex = getRandomWord();



function play()
{
	var answer = document.getElementById("input_answer").value;
	
	var correct_answer = english4[wordIndex];
	
	//var myFeedback = "You're right!";
	

	if (answer == correct_answer && answerCount == 0)
	{
		score = score + 2;
 		myFeedback = "Correct!";
 		document.getElementById("feedbackGif").src = "right.gif";
 		
 		answerCount = 0;
	}else if (answer == correct_answer && answerCount > 0)	{
		score = score + 1;
 		myFeedback = "Correct!";
 		document.getElementById("feedbackGif").src = "right.gif";
 		
 		answerCount = 0;
	}


 	if (answer != correct_answer){
		myFeedback = "The correct answer was " + correct_answer + ".";
 		document.getElementById("feedbackGif").src = "wrong.gif";
 	
	}

	document.getElementById("feedback").innerHTML = myFeedback;
	document.getElementById("myScore").innerHTML = "Score: " + score;


	wordIndex = getRandomWord();
	document.getElementById("display").innerHTML = chinese4[wordIndex];


	document.getElementById("input_answer").value = "";

	document.getElementById("myHint").innerHTML = "";
	document.getElementById("startButton").disabled = true;
	
	
	if (document.getElementById("btn_next").clicked = true)
	{
	buttonCount ++;
	}
    if (buttonCount > 29){
		document.getElementById("input_answer").disabled = true;
		alert("You have answered all the questions!");
		if (score < 24){
			alert("You failed the test!");
		} 
	
		else if (score < 54){alert ("You passed the test!");} else {
			alert("Congratulations! You scored 90% or above! We will award you an e-certificate.");
			popUp();
			}
			}
	



}
var windowObjectReference;
function popUp()
{
windowObjectReference = window.open(
"cert.html");}
function getHint1()
{
	var hintAnswer = english4[wordIndex].substr(0,3);
	document.getElementById("input_answer").value = hintAnswer;
	document.getElementById("feedback").innerHTML = "";
answerCount ++;
}
function getHint2()
{
	var hintMessage = "The answer has " + english4[wordIndex].length + " letters.";
	document.getElementById("myHint").innerHTML = hintMessage;
	document.getElementById("feedback").innerHTML = "";
answerCount ++;
}
</script>

</head>
<body>
<div>
<p>You have <span id="timer">900</span> seconds left.</p><br/>
<p id="myScore">Score: 0</p>
</div>
<h1>HKEB Vocabulary Test: Level 4</h1> <br/><br/><br/><br/>
<h2>Test your vocabulary</h2>
<br/>
<button id="startButton" onclick="start()">Start</button>
<br />

<p id="display"></p>
<br />

<form>
<input type="text" id="input_answer" placeholder="Translate the word into English" size="50">
</form>

<p class="hint" id="myHint"></p>

<p id="feedback">Click on 'Start' to start the game.</p>


<img id="feedbackGif" src="" width="150px"></img>
<br/>
<button id="btn_next" onclick="play()">Next Word</button> 
<button id="hint1" onclick="getHint1()">Give me a hint</button>
<button id="hint2" onclick="getHint2()">Give me another hint</button>
<br/>
<br/>
<button id="menu" onclick="document.location='LT3210_group7.html'"><br/>Back to Menu<br/><br/></button>
</body>
</html>